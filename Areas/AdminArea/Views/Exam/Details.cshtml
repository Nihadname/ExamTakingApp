@model ExamTakingApp.ViewModels.Exam.ExamDetailsDto

@{
    ViewData["Title"] = "Exam Details";
    Layout = null; // Set to null as per your template; can be changed to "_Layout" if using a shared layout
}

<!DOCTYPE html>
<html>
<head>
    <title>@ViewData["Title"]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <div class="container mt-4">
        <h2 class="mb-3">Exam Details</h2>

        <!-- Success / Error messages -->
        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success">@TempData["SuccessMessage"]</div>
        }
        @if (TempData["ErrorMessage"] != null)
        {
            <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
        }

        <!-- Exam Details -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">@Model.Title</h4>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-3">Description</dt>
                    <dd class="col-sm-9">@Model.Description</dd>
                    <dt class="col-sm-3">Duration (min)</dt>
                    <dd class="col-sm-9">@Model.DurationMinutes</dd>
                    <dt class="col-sm-3">Created At</dt>
                    <dd class="col-sm-9">@Model.CreatedAt?.ToString("yyyy-MM-dd HH:mm")</dd>
                    <dt class="col-sm-3">Total Questions</dt>
                    <dd class="col-sm-9">@Model.Questions.Count</dd>
                </dl>
            </div>
        </div>

        <!-- Questions List -->
        <h3 class="mb-3">Questions</h3>
        @if (Model.Questions.Any())
        {
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Question Text</th>
                        <th>Type</th>
                        <th>Answer Options</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var question in Model.Questions)
                    {
                        <tr>
                            <td>@question.Text</td>
                            <td>@question.QuestionType</td>
                            <td>
                                <ul class="list-unstyled">
                                    @foreach (var option in question.AnswerOptions)
                                    {
                                        <li>
                                            @option.Text
                                            @if (option.IsCorrect)
                                            {
                                                <span class="badge bg-success ms-2">Correct</span>
                                            }
                                        </li>
                                    }
                                </ul>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <div class="alert alert-info">No questions available for this exam.</div>
        }

        <!-- Navigation -->
        <div class="mt-3">
            <a asp-action="Index" asp-area="AdminArea" asp-controller="Exam" class="btn btn-primary">Back to Exams</a>
            <a asp-action="CreateQuestion" asp-route-examId="@Model.Id" class="btn btn-success">Add Question</a>
        </div>
    </div>
</body>
</html>